# ============================================================================
# Bridge Service 环境变量配置示例
# ============================================================================
# 用途：本地开发时的环境变量模板
# 使用：复制此文件为 .env 用于本地 Cargo 开发
#
# 注意：
# - Docker 环境使用 docker-compose.yml 中定义的环境变量
# - CI 环境使用 docker-compose.yml 中定义的环境变量
# - 此文件主要用于本地 Cargo 开发
# ============================================================================

# ----------------------------------------------------------------------------
# 数据库配置
# ----------------------------------------------------------------------------
# PostgreSQL 连接 URL
# 本地开发端口: 10035 (映射自 docker-compose.yml)
DATABASE_URL=postgres://echo_user:echo_password@localhost:10035/echo_db

# ----------------------------------------------------------------------------
# Redis 配置
# ----------------------------------------------------------------------------
# Redis 连接 URL
# 本地开发端口: 10036 (映射自 docker-compose.yml)
REDIS_URL=redis://:redis_password@localhost:10036

# ----------------------------------------------------------------------------
# EchoKit 配置
# ----------------------------------------------------------------------------
# EchoKit WebSocket URL
# 格式: wss://your-echokit-domain/ws/{visitor-id}
# 注意: 需要替换为实际的 visitor ID
ECHOKIT_WEBSOCKET_URL=wss://indie.echokit.dev/ws/bridge-test

# ----------------------------------------------------------------------------
# MQTT 配置
# ----------------------------------------------------------------------------
# MQTT Broker 地址
MQTT_BROKER_HOST=localhost
# MQTT Broker 端口 (本地开发端口: 10039)
MQTT_BROKER_PORT=10039

# ----------------------------------------------------------------------------
# Bridge 服务配置
# ----------------------------------------------------------------------------
# UDP 音频服务器绑定地址
BRIDGE_UDP_BIND_ADDRESS=0.0.0.0:8083

# API Gateway WebSocket URL
# 本地开发: ws://localhost:8080/ws
# Docker 环境: ws://api-gateway:8080/ws
API_GATEWAY_WEBSOCKET_URL=ws://localhost:8080/ws

# 最大并发会话数
MAX_SESSIONS=100

# 会话超时时间（秒）
SESSION_TIMEOUT_SECONDS=300

# ----------------------------------------------------------------------------
# 日志配置
# ----------------------------------------------------------------------------
# Rust 日志级别
# 可选值: trace, debug, info, warn, error
RUST_LOG=info

# ============================================================================
# 说明
# ============================================================================
#
# 运行时配置来源：
# 1. Docker Compose 环境：使用 docker-compose.yml 中的 environment 配置
# 2. 本地 Cargo 开发：使用此 .env 文件 + 代码中的硬编码默认值
# 3. CI 环境：使用 docker-compose.yml 中的配置
#
# 环境变量优先级：
# 1. 系统环境变量（最高优先级）
# 2. .env 文件中的变量（次优先级）
# 3. 代码中的硬编码默认值（最低优先级）
#
# Docker 端口映射参考：
# - PostgreSQL: localhost:10035 -> postgres:5432
# - Redis: localhost:10036 -> redis:6379
# - MQTT: localhost:10039 -> mqtt:1883
# - API Gateway: localhost:10033 -> api-gateway:8080
# - Bridge HTTP: localhost:10031 -> bridge:8082
# - Bridge UDP: localhost:10032 -> bridge:8083
# ============================================================================
